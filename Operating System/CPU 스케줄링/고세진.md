# CPU 스케줄링

CPU 스케줄링

- 운영체제가 프로세스들에게 CPU 자원을 배분하는 것

### 프로세스 우선순위

IO 바운드 프로세스한테 우선순위를 높게 준다.

IO 바운드 프로세스는 IO 버스트를 할 때 어차피 대기상태로 가기 때문에, IO 버스트 상태로 빠르게 보내고 다른 프로세스가 CPU 자원을 받는게 합리적이다.

운영체제는 각 프로세스의 PCB에 우선순위를 명시하고, PCB에 적힌 우선순위 기준으로 먼저 처리할 프로세스를 결정한다.

### 스케줄링 큐

운영체제의 자원은 할당은 큐 형태로 관리함 

ready queue : CPU를 사용하고 싶은 프로세스의 큐

wating queue: IO device를 사용하기 위해 대기상태에 접어든 프로세스의 큐

- 입출력 완료 인터럽트가 발생하면 레디 큐로 이동



### 선점형과 비선점형 스케줄링

선점형: 운영체제가 프로세스로 부터 자원을 강제탈취해서 다른 프로세스에 할당 가능

- 자원 독점을 막을 수 있음
- 문맥 교환 과정에서 오버헤드 큼

비선점형: 프로세스가 종료되거나 스스로 대기상태에 접어들기 전까지 다른 프로세스가 끼어들 수 없는 방식

- 자원 골고루 분배하기 어려움
- 문맥 교환 오버헤드가 적음

### 스케줄링 알고리즘

1. FCFS
    - first come fist served
    - 비선점형
    - 먼저 도착한 프로세스에 의해 대기 시간을 길게 잡아야 하는 현상 → convy effect (호위 효과)
2. SJF
    - 호위 효과 방지
    - 이용 시간의 길이가 가장 짧은 프로세스 먼저 실행
    - 기본적으로 비선점형으로 분류됨.
    - 선점형으로 구현하면 SRT 스케줄러가 됨
3. SRT
    - shortest remaining time
    - SJF + RR
    - 정해진 시간 만큼만 time slice를 사용하고, 남아있는 작업 시간이 가장 적은 프로세스가 다음 타임 슬라이스를 사용
4. 라운드 로빈 스케줄링  
    1. FCFS + 타임슬라이스
    2. 정해진 타임슬라이스만큼 CPU를 사용하는 선점형 CPU
5. 우선순위 스케줄링
    1. 가장 높은 우선순위 가진 프로세스 먼저 실행
        - SRT, SJF도 넓은 의미에서는 우선순위 스케줄링
    2. Starvation 현상 (우선순위 낮은 경우 실행 안됨)
        - 에이징을 통해 해결. 오래 대기한 프로세스의 우선순위를 높이는 방식
6. 멀티레벨 큐
    - 우선순위별로 큐를 여러개 사용함.
    - 우선순위 가장 높은 큐에 있는 프로세스를 먼저 실행
    - 큐가 비어 있으면 그다음 우선순위 큐에 있는 프로세스 처리
    - 큐마다 스케줄링 정책을 적용할 수 있음
    
7. 멀티레벨 피드백 큐
    - 우선순위 낮은 큐에 있는 프로세스를 우선순위 노은 큐로이동해서 starvation 예방
    - 준비상태의 프로세스는 처음에는 높은 우선순위에 프로세스가 삽입되고, 일정 시간만큼 실행
    - 실행이 끝나지 않으면, 다음 우선순위 큐에 삽입
    - 안 끝나면 또 다음 우선순위 큐에 삽입
        - cpu 바운드 프로세스는 자주 우선순위가 내려가게 됨. 따라서 starvation 예방을 위해 에이징 기법으로 우선순위 높은 큐에 올림.
